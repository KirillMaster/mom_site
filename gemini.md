# Обзор проекта: "Сайт-портфолио для мамы"

## 1. Предназначение и семантика проекта

Этот проект представляет собой персональный сайт-портфолио, разработанный для демонстрации творческих работ художника. Судя по структуре и названиям моделей (`Artwork`, `Video`, `Category`), основная цель — предоставить платформу для публикации и каталогизации картин, видео-материалов и, возможно, других форм искусства.

**Ключевые сущности:**

*   **Публичная часть:** Галерея работ, видео-раздел, страницы "О себе" и "Контакты". Доступна всем посетителям.
*   **Административная часть:** Защищенная область для владельца сайта, позволяющая управлять контентом: добавлять/редактировать/удалять работы, видео, категории и текстовое наполнение страниц.

## 2. Архитектура

Проект построен на современной микросервисной архитектуре с четким разделением на Frontend и Backend.

*   **Backend:**
    *   **Технология:** ASP.NET Core Web API (C#).
    *   **Структура:** Разделен на три проекта для лучшей организации кода:
        *   `MomSite.API`: Основной проект API, содержит контроллеры для обработки HTTP-запросов.
        *   `MomSite.Core`: Ядро проекта, содержит модели данных (POCO-классы), такие как `Artwork.cs`, `Video.cs`.
        *   `MomSite.Infrastructure`: Инфраструктурный слой, отвечает за работу с данными (Entity Framework Core в `ApplicationDbContext.cs`) и внешними сервисами (например, `ImageService.cs` для обработки загружаемых изображений).
    *   **База данных:** Используется Entity Framework Core, что предполагает реляционную базу данных (например, PostgreSQL или SQL Server), настраиваемую через `appsettings.json`.

*   **Frontend:**
    *   **Технология:** Next.js с TypeScript.
    *   **Структура:** Используется современный App Router (каталог `app`).
    *   **Стилизация:** Tailwind CSS.
    *   **Взаимодействие с Backend:** Взаимодействие происходит через API-клиент, определенный в `lib/api.ts` и используемый через хук `hooks/useApi.ts`.

*   **Оркестрация:**
    *   **Технология:** Docker Compose (`docker-compose.yml`).
    *   **Описание:** Проект полностью контейнеризирован. `docker-compose.yml` определяет два сервиса (`frontend` и `backend`), что позволяет легко запустить все приложение одной командой.

## 3. Ключевые моменты кодовой базы

*   **Backend API Endpoints:**
    *   `PublicController.cs`: Предоставляет данные для публичной части сайта (получение списка работ, видео и т.д.).
    *   `AdminController.cs`: Предоставляет защищенные эндпоинты для управления контентом (создание, обновление, удаление). Требует авторизации.
    *   `ArtworksController.cs`: Вероятно, содержит основную логику для работы с произведениями искусства.

*   **Frontend Pages:**
    *   Структура каталога `app` напрямую соответствует URL-адресам сайта: `/`, `/about`, `/contacts`, `/gallery`, `/videos`.
    *   `app/admin/page.tsx`: Страница входа и управления контентом.
    *   `components/Navigation.tsx` и `components/Footer.tsx`: Переиспользуемые компоненты для навигации и подвала сайта.
    *   `lib/api.ts`: Центральное место для всех вызовов к backend API.

*   **Управление данными:**
    *   `MomSite.Infrastructure/Data/ApplicationDbContext.cs`: Определяет схему базы данных через `DbSet<>`. Любые изменения в моделях в `MomSite.Core` потребуют создания новой миграции EF Core.

## 4. Инструкции по запуску

Проект полностью контейнеризирован, что делает запуск очень простым.

1.  **Создайте файл `.env`:** В корневой директории проекта создайте файл `.env` на основе `env.example`. Заполните необходимые переменные окружения, такие как строки подключения к базе данных и URL-адреса API.
    ```bash
    # Примерное содержимое .env
    DATABASE_URL="postgres://user:password@db:5432/momsite"
    NEXT_PUBLIC_API_URL="http://localhost:5000"
    ```

2.  **Запустите проект с помощью Docker Compose:**
    Выполните следующую команду в корневой директории проекта:
    ```bash
    docker-compose up --build -d
    ```
    *   `--build`: Эта опция пересобирает образы, если в `Dockerfile` или коде были изменения.
    *   `-d`: Запускает контейнеры в фоновом режиме.

3.  **Доступ к приложению:**
    *   **Frontend (публичный сайт):** `http://localhost:3000`
    *   **Backend (API):** `http://localhost:5000`

## 5. Рекомендации по использованию MCP (Model Capabilities)

При работе с этим проектом рекомендуется использовать следующие возможности модели:

*   **`sequential-thinking`**:
    *   **Назначение:** Для решения комплексных задач, требующих многошагового планирования и исполнения.
    *   **Пример использования:**
        *   **Задача:** "Добавить новый раздел 'Выставки' на сайт".
        *   **План (мысли):**
            1.  **Анализ:** Изучить существующие модели в `MomSite.Core` и контроллеры в `MomSite.API`.
            2.  **Backend:** Создать новую модель `Exhibition.cs`. Добавить `DbSet<Exhibition>` в `ApplicationDbContext.cs`. Создать миграцию EF Core. Добавить новые эндпоинты в `PublicController` и `AdminController` для управления выставками.
            3.  **Frontend:** Создать новую страницу `app/exhibitions/page.tsx`. Добавить функции для получения данных о выставках в `lib/api.ts`. Обновить `components/Navigation.tsx`, добавив ссылку на новый раздел.
            4.  **Верификация:** Проверить, что новый раздел работает как на frontend, так и на backend.

*   **`playwright` (или другой инструмент для E2E-тестирования):**
    *   **Назначение:** Для сквозного (End-to-End) тестирования пользовательских сценариев. Это критически важно для проверки взаимодействия между Frontend и Backend.
    *   **Пример использования:**
        *   **Задача:** "Проверить сценарий добавления новой картины".
        *   **Сценарий теста:**
            1.  Открыть страницу `/admin`.
            2.  Ввести логин и пароль, нажать "Войти".
            3.  Перейти в раздел управления работами.
            4.  Нажать "Добавить новую работу".
            5.  Заполнить все поля (название, описание, загрузить изображение).
            6.  Нажать "Сохранить".
            7.  Перейти на публичную страницу `/gallery`.
            8.  **Убедиться**, что новая картина появилась в галерее с правильным изображением и данными.
